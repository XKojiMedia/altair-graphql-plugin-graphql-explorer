import{r as l,j as r,_ as v,C as x,a as k,S as m,b as y,c as f,d as j}from"./square.js";const C={keyword:"var(--editor-keyword-color)",def:"var(--editor-def-color)",property:"var(--editor-property-color)",qualifier:"var(--editor-attribute-color)",attribute:"var(--editor-attribute-color)",number:"var(--editor-number-color)",string:"var(--editor-string-color)",builtin:"var(--editor-builtin-color)",string2:"var(--editor-string-color)",variable:"var(--editor-variable-color)",atom:"var(--editor-atom-color)"},b=()=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polyline",{points:"6 9 12 15 18 9"})}),L=()=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polyline",{points:"9 18 15 12 9 6"})}),S=()=>r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"3px"},children:[r.jsx("polyline",{points:"9 11 12 14 22 4"}),r.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),W=()=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:"3px"},children:r.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"})}),u=o=>{let t;if(o)try{t=f(o)}catch{}return t},E=({context:o})=>{const[t,i]=l.useState({}),[s,p]=l.useState(""),g=(...e)=>console.log(...e),w=e=>o.app.setQuery(s,e),c=l.useCallback(({windowId:e,data:n})=>{i(a=>({...a,[e]:{...a[e],query:n}}))},[]),d=l.useCallback(({windowId:e,data:n})=>{i(a=>({...a,[e]:{...a[e],sdl:n,schema:u(n)}}))},[]),h=e=>{p(e.windowId),i(n=>({...n,[e.windowId]:{...e,schema:u(e.sdl)}}))};return l.useEffect(()=>(o.app.getCurrentWindowState().then(e=>{e&&h(e)}),o.events.on("query.change",c),o.events.on("sdl.change",d),o.events.on("current-window.change",async({windowId:e})=>{const n=await o.app.getWindowState(e);n&&h(n)}),()=>{o.events.off()}),[o,c,d]),t[s]?r.jsx(v,{schema:t[s].schema,query:t[s].query,onEdit:e=>w(e),explorerIsOpen:!0,onToggleExplorer:g,colors:C,arrowClosed:r.jsx(x,{size:15,style:{marginRight:"3px"}})??L(),arrowOpen:r.jsx(k,{size:15,style:{marginRight:"3px"}})??b(),checkboxChecked:r.jsx(m,{size:15,style:{marginRight:"3px"}})??S(),checkboxUnchecked:r.jsx(y,{size:15,style:{marginRight:"3px"}})??W()}):null};class R{initialize(t){const i=document.createElement("div");j(i).render(r.jsx(E,{context:t})),t.app.createPanel(i)}async destroy(){}}window.AltairGraphQL.plugins.GraphQLExplorer=R;
